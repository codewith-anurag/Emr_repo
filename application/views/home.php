<!-- <style type="text/css">
  .page-sidebar {
      height: auto;
      width: 260px;
      position: fixed;
      padding: 0px;
      background-color: #ffffff;
      margin-top: 60px;
      overflow: hidden;
      box-shadow: 0 0 0px 0 rgba(33,33,33,.2) !important;
      }

   .sidebar-li{
        border-bottom: 2px #eee solid;
        }
        #main-menu-wrapper li a:hover {
        background-color: #d5f3f2;
        border-left: 4px solid #4d9cf8;
        color: #00b3ac;
        }
         #main-menu-wrapper li a:hover {
              color: #150aec;
               font-weight: 800;
        }
        .text-primary:hover {
                color: #150aec;
               font-weight: 800;
        }
        .table>tbody>tr>td:hover {
       font-weight: 600;
      }
      #main-menu-wrapper li a {
        color: #150aec;
      }
      .text-primary {
color: #150aec;
}
.active .modal-content {
border-radius: 16px;
box-shadow: 2px 14px 16px -3px #5a5a5a;
}
.active .modal-body {
border-radius: 15px;
padding: 20px;
}
.active .modal-body h4 {
padding-top: 20px;
font-weight: 700;
color: #150aec;
}
.active .modal-body span {
padding-top: 10px;
}
.table>tbody>tr>td:hover {
font-weight: 600;
}
.delete .modal-content {
border-radius: 15px;
}
.delete .modal-title  {
color: #150aec;
font-size: 18px;
font-weight: 700;
}
.delete .modal-body p {
color: red;
font-weight: 700;
}
.delete .modal-body {
padding: 20px;
}
.bg-light-blue {
  background: #0089ff !important;
}
</style>
<style type="text/css">
  .white-box {
      background-color: #ececec;
      box-shadow: 0 1px 2px rgba(0,0,0,.15);
      border: 1px solid rgba(0, 0, 0, 0.125);
      border-radius: 4px;
      padding:15px;
  }
  .box-white {
    background: #fff;
    padding: 15px;
    width: auto;
    height: 240px;
  }
  /*.dashboard-box {
    display: flex;
  }*/
  .dashboard-box img {
    width: 8%;
    /*margin-left: 10px;*/
  }
  .dashboard-box h3 {
      font-weight: 600;
    padding-left: 15px;
    padding-top: 5px;
    font-size: 18px;
    color: #150aec;
    display: inline;
   position: relative;
    top: 5px;
  }
  .box-white p {
    font-size: 14px;
    color: #8a8a8a;
    padding-top: 10px;
  }
  .box-white .btn-primary {
        background: #150aec;
    color: #ffffff;
    outline: none;
  text-align: center;
  margin: 0 auto;
   display: block;
  width: 100%;
  border-radius: 7px;
    margin-top: 35px;
  }
  .top-56 {
    position: relative;
    top: 56px;
  }
  .dash-link  {
    display: flex;
    justify-content: space-between;
  }
  .dash-link a {
    font-size: 14px;
    color: #150aec;
  } .dash-link a:hover {
    color: #150aec;
    font-weight: 700;
  }
  .dash-link span {
    color: #1a9c02;
     font-weight: 900;
  }
   .dash-link i {
    padding-right: 5px;
   }
   .mt-15 {
    margin-top: 15px;
   }

</style>
<style type="text/css">
  .kpull-left {
      float: left !important;
      max-width: 100%;
      padding-right: 1em;
  }
  .fieldLabelColor, .lbl-color, .color-light, .text-light {
      color: #666;
      font-weight: normal;
  }
  .text-primary {
      color: #337ab7;
  }
  .row-0:hover, .row-1:hover, .bg55, .recordHead, .menu:hover, .menu2:hover, .menu3:hover, .menu-img:hover, .highlight-hover-link:hover, .highlight-hover:hover, .highlight, .bg-hover:hover, .table-hover > tbody > tr:hover {
      background-color: #d5f3f2;
  }
  .table-fixed {
      table-layout: fixed;
      width: 100%;
  }
</style> -->
<style type="text/css">
  .page-sidebar {
      height: auto;
      width: 260px;
      position: fixed;
      padding: 0px;
      background-color: #ffffff;
      margin-top: 60px;
      overflow: hidden;
      box-shadow: 0 0 0px 0 rgba(33,33,33,.2) !important;
      }

   .sidebar-li{
        border-bottom: 2px #eee solid;
    }
    #main-menu-wrapper li a:hover {
        background-color: #d5f3f2;
        border-left: 4px solid #4d9cf8;
        color: #00b3ac;
    }
    #main-menu-wrapper li a:hover {
        color: #150aec;
        font-weight: 800;
    }
    .text-primary:hover {
        color: #150aec;
        font-weight: 800;
    }
    .table>tbody>tr>td:hover {
       font-weight: 600;
    }
    #main-menu-wrapper li a {
       color: #150aec;
    }
    .text-primary {
        color: #150aec;
    }
    .active .modal-content {
        border-radius: 16px;
        box-shadow: 2px 14px 16px -3px #5a5a5a;
    }
    .active .modal-body {
        border-radius: 15px;
        padding: 20px;
    }
    .active .modal-body h4 {
        padding-top: 20px;
        font-weight: 700;
        color: #150aec;
    }
    .active .modal-body span {
        padding-top: 10px;
    }
    .table>tbody>tr>td:hover {
        font-weight: 600;
    }
    .delete .modal-content {
        border-radius: 15px;
    }
    .delete .modal-title  {
        color: #150aec;
        font-size: 18px;
        font-weight: 700;
    }
    .delete .modal-body p {
        color: red;
        font-weight: 700;
    }
    .delete .modal-body {
        padding: 20px;
    }
    .page-sidebar.collapseit .wraplist li a i.img {
        float: left;
        margin-top: 3px;
        padding-left: 18px;
    }
    .page-sidebar.chat_shift .wraplist li:hover .title, .page-sidebar.collapseit .wraplist li:hover .title {
        top: 30px;
    }
    .page-sidebar.chat_shift #main-menu-wrapper .wraplist li a, .page-sidebar.collapseit #main-menu-wrapper .wraplist li a {
        padding-left: 0px;
        margin-bottom: 33px;
    }
    .page-sidebar.chat_shift .wraplist li:hover .title, .page-sidebar.collapseit .wraplist li:hover .title {
        top: 40px;
    }
    .page-sidebar {
        width: 180px;
    }
    #main-content {
        margin-left: 165px;
    }
    .page-sidebar.chat_shift .wraplist li, .page-sidebar.collapseit .wraplist li {
        position: relative !important;
        bottom: 18px;
    }

</style>
<style type="text/css">
.popup-box {
    background: #fff;
    border-radius: 5px;
    box-shadow: -1px 5px 10px -3px #ccc;
    padding: 5px;
    border: 1px solid #ccc;
}
.popup-box img {
    width: 50%;
    margin-left: 30px !important;
    margin-bottom: 6px;
}
  .white-box {
                background-color: #ececec;
                box-shadow: 0 1px 2px rgba(0,0,0,.15);
                border: 1px solid rgba(0, 0, 0, 0.125);
                border-radius: 4px;
                padding:15px;
            }
            .box-white {
              background: #fff;
              padding: 15px;
              width: auto;
              height: 290px;
              margin-bottom:30px;
            }
            /*.dashboard-box {
              display: flex;
            }*/
            .dashboard-box img {
              width: 8%;
              /*margin-left: 10px;*/
            }
            .dashboard-box h3 {
                font-weight: 600;
              padding-left: 15px;
              padding-top: 5px;
              font-size: 16px;
              color: #150aec;
              display: inline;
             position: relative;
              top: 0px;
            }
            .box-white p {
              font-size: 13px;
              color: #150aec;
              padding-top: 10px;
            }
            .box-white .btn-primary {
              background: #0089ff;
                 color: #ffffff;
                 outline: none;
                 text-align: center;
                 margin: 0 auto;
                 display: block;
                 border-radius: 7px;
                  width: 80%;
                 position: absolute;
                 bottom: 45px;
                }
                @media only screen and (max-width:1363px) {
             .box-white .btn-primary {
               width: 77%;
             }
           }

            .pl-0 {
              padding-left: 0px !important;
            }
           /* .top-72 {
              position: relative;
              top: 72px !important;
            }
            .top-6 {
              position: relative;
              top: 6px !important;
            }*/
            .dash-link  {
              display: flex;
              justify-content: space-between;
            }
            .dash-link a {
              font-size: 12px;
              color: #150aec;
            } .dash-link a:hover {
              color: #150aec;
              font-weight: 700;
            }
            .dash-link span {
              color: #1a9c02;
               font-weight: 900;
            }
             .dash-link i {
              padding-right: 5px;
             }
             .mt-15 {
              margin-top: 15px !important;
             }
             .mt-7 {
              margin-top: 6px !important;
             }

             .appoimtment-btn {
                          position: absolute !important;
                          bottom: 20% !important;
                          left: 9px !important;
                         }
                         .modal-content {
   border-radius: 15px !important;
}
.modal-content h4 {
   color: #150aec;
    font-weight: 700;
}
.nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus {
    background: transparent;
    border: none;
    border-bottom: 3px solid #150aec;
    color: #150aec;
    font-weight: 700;
}
.nav-tabs>li>a {
    border: none;
    background: transparent;
    color: #150aec;
}
.nav>li>a:hover, .nav>li>a:focus {
    border-bottom: 3px solid #150aec;
    color: #150aec;
    font-weight: 700;
    background: transparent;
}
.modal-body {
    padding: 15px;
}
.tab-content {
    border: none;
    background: transparent;
    padding: 0px;
}
#appointment .tab-pane {
    height: 350px;
    overflow-y: auto;
    overflow-x: hidden;
}
.border-bottom {
    border-bottom: 1px solid #ccc;
    display: block;
    padding-bottom: 10px;
    padding-top: 7px;
}
.pos-icon {
    display: flex;
    position: relative;
    bottom: 24px;
    left: calc(100% - 4%);
}
textarea {
    padding: 10px;
    border-radius: 5px;
}
.w-100 {
    width: 100%;
}
</style>
<?php
      $hospital_id = $this->session->userdata('hospital_id');
      $sess_user = $this->session->userdata('user_id');
      $session_email = $this->session->userdata('email');
      $adminData = $this->db->select("*")->from("user")->where('user_id', $sess_user)->get()->row();
      $features_array = explode(',',$adminData->features);
    if($hospital_id){
      $getHospital = $hospital_id;
    }else{
      $getHospital = $sess_user;
    }

      $activePatient = $this->db->select("*")->from("patient")->where("status","1")->where("hospital_id",$getHospital)->get()->result();
      $inactivePatient = $this->db->select("*")->from("patient")->where("status","0")->where("hospital_id",$getHospital)->get()->result();

      $mpActived = $this->db->select("*")->from("user")->where("status","1")->where("created_by",$sess_user)->where("user_role","2")->get()->result();
    $mpInactived = $this->db->select("*")->from("user")->where("created_by",$sess_user)->where("status","0")->where("user_role","2")->get()->result();

      // Patient patient
  // $type = "(message.user_type= 'medical_patient' or message.user_type= 'patient_admin')";
   // $type = "(message.user_type= 'patient_admin')";
    $this->db->select('*');
    $this->db->from('message');
    $this->db->where('to_user',$session_email);
    $this->db->where('user_type','patient_admin');
    $this->db->where('is_read','0');
    $patientUnread = $this->db->get()->result();

  // Patient incoming count

  // Medical Admin count
    $type = "(message.user_type= 'medical_admin' or message.user_type= 'medical_provider')";
    $this->db->select('*');
    $this->db->from('message');
    $this->db->where('to_user',$session_email);
    $this->db->where($type);
    $this->db->where('is_read','0');
    $medicalAdminUnread = $this->db->get()->result();

  // Medical Admin count
   $totalSchedule = $this->db->select("*")->from("schedule")->where("hospital_id",$getHospital)->get()->result();
?>
<div class="wrapper main-wrapper row">
<div class="white-box" style="margin-right: 2%;min-height: 850px;">
    <div class="row">
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/summary_dis.png">
  <h3>Summary</h3>
  <p></p>
</div>
<div class="dash-link">
  <a href="#"> Active Patient - <span><?php echo count($activePatient); ?></span></a>
  <a href="#"> Inactive Patient - <span><?php echo count($inactivePatient); ?><span></a>
</div>
<div class="dash-link">
  <a href="#"> Active Medical Provider - <span><?php echo count($mpActived); ?></span></a>
  <a href="#"> Inactive  Medical Provider - <span> <?php echo count($mpInactived); ?></span></a>
</div>

    <?php if(in_array('message',$features_array)){ ?>
		<div class="dash-link">
		  <a href="<?php echo base_url().'messages/message/index' ?>"> Patient Unread Message - <span><?php echo count($patientUnread); ?></span></a>
		</div>
		<div class="dash-link">
		  <a href="<?php echo base_url().'messages/message/index' ?>"> Medical Provider / Admin Unread Message - <span> <?php echo count($medicalAdminUnread); ?></span></a>
		</div>
    <?php } ?>
    <?php if(in_array('schedule',$features_array)){ ?>
		<div class="dash-link">
		  <a href="#"> Total Schedule - <span><?php echo count($totalSchedule); ?><span></a>
		</div>
	<?php } ?>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
             <img src="<?php echo base_url(); ?>assets/images/patient.png">

  <h3>Patients</h3>
</div>
  <p>Create patient, capturing all the basic, insurance/ guraantor details </p>
  <div class="dash-link">
  <a href="<?php echo base_url(); ?>patient/create"><i class="fa fa fa-plus"></i>Add Patient</a>
  <a href="#"><i class="fa fa-list-alt"></i>Patient Report</a>
</div>
<div class="dash-link">
  <a href="#"> Active Patient - <span><?php echo count($activePatient); ?></span></a>
  <a href="#"> Inactive Patient - <span><?php echo count($inactivePatient); ?><span></a>
</div>
   <a href="<?php echo base_url(); ?>patient"><button type="button" class="btn btn-primary text-center top-72">Patient List</button></a>
        </div>
      </div>
       <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/doctor.png">

  <h3>Medical Provider</h3>
</div>
  <p>Create medical providers with optional admin access. </p>
  <div class="dash-link">
  <a href="<?php echo base_url(); ?>doctor/create"><i class="fa fa fa-plus"></i>Add <br>  Medical Provider</a>
  <a href="<?php echo base_url(); ?>doctor"><i class="fa fa-list-alt"></i>Medical Provider<br> Report</a>
</div>
<div class="dash-link">
  <a href="#"> Active <br> Medical Provider - <span><?php echo count($mpActived); ?></span></a>
  <a href="#"> Inactive <br> Medical Provider - <span> <?php echo count($mpInactived); ?></span></a>
</div>
   <a href="<?php echo base_url(); ?>doctor"><button type="button" class="btn btn-primary text-center top-6">Medical Provider List</button></a>
        </div>
      </div>
      <?php if(in_array('health_record',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/record.png">

  <h3>Health Record</h3>
</div>
  <p>Electronic health records, includes Vital Signs, e-Prescription, Allergies, Medications & much more. </p>

   <a href="<?php echo base_url('health_report/create'); ?>" class="top-56"><button type="button" class="btn btn-primary text-center">Health Record List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php if(in_array('schedule',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/calendar.png">

  <h3>Schedule</h3>
</div>
  <p>Schedule a meeting with patients and medical professionals at anytime/anywhere. </p>

<!-- <a href="#" data-toggle="modal" data-target="#appointment"><button type="button" class="btn btn-primary appoimtment-btn text-center"> </button></a> -->
<div class="dash-link">
  <a href="#" data-toggle="modal" data-target="#appointment"><i class="fa fa fa-plus"></i>Add Appointment</a>
  <a href="#"> Total Schedule - <span><?php echo count($totalSchedule); ?><span></a>
</div>
   <a href="<?php echo base_url(); ?>schedule" class="top-56"><button type="button" class="btn btn-primary text-center">Schedule List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php if(in_array('billing',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
         <img src="<?php echo base_url(); ?>assets/images/bill.png">
  <h3>Billing</h3>
</div>
  <p>To generate bills and patient statements for the patients. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">Billing List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php if(in_array('message',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
         <img src="<?php echo base_url(); ?>assets/images/envelope.png">
  <h3>Message</h3>
</div>
  <p>Secure messaging is the simplest and most efficient way to exchange information/documents for patients and medical professionals. </p>
  <div class="dash-link">
    <a href="<?php echo base_url().'messages/message/index' ?>"> Patient Unread Message - <span><?php echo count($patientUnread); ?></span></a>
  </div>
  <div class="dash-link">
    <a href="<?php echo base_url().'messages/message/index' ?>"> Medical Provider / Admin Unread Message - <span> <?php echo count($medicalAdminUnread); ?></span></a>
  </div>

   <a href="<?php echo base_url(); ?>messages/message/index" class="top-56"><button type="button" class="btn btn-primary text-center">Message List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php /*if(in_array('e_priscribing',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/e-prescribing.png">

  <h3>E-Prescribing</h3>
</div>
  <p>Send prescriptions directly to a patient's preferred pharmacy. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">E-Prescribing List</button></a>
        </div>
      </div>
    <?php }  */?>
    <?php if(in_array('online_profile',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/online-profile.png">

  <h3>Online Profile</h3>
</div>
  <p>To view online profiles at one place for all the patients & medical providers. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">Online Profile List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php if(in_array('insurance_eligiblility',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/insurance.png">

  <h3>Insurance eligibility</h3>
</div>
  <p>To add, view, modify Insurance details for patients. </p>
  <div class="dash-link">
  <a href="<?php echo base_url(); ?>insurance/create"><i class="fa fa fa-plus"></i>Add Insurance</a>
  <!-- <a href="#"><i class="fa fa-list-alt"></i>Patient Report</a> -->
  </div>
   <a href="<?php echo base_url(); ?>insurance" class="top-56"><button type="button" class="btn btn-primary text-center">Insurance eligibility List</button></a>
        </div>
      </div>
    <?php } ?>
    <?php if(in_array('telemedicine',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/telemedicine.png">

  <h3>Telemedicine</h3>
</div>
  <p>To connect patients and physicians around the world quickly and securely through live video. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">Telemedicine List</button></a>
        </div>
      </div>
      <?php } ?>
    <?php /*if(in_array('growth_charts',$features_array)){*/ ?>
      <!-- <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php //echo base_url(); ?>assets/images/growth_charts.png">

  <h3>Growth Charts</h3>
</div>
  <p>To view dynamic presentable charts of vital signs of all patients. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">View Charts</button></a>
        </div>
      </div> -->
      <?php /*}*/ ?>
      <?php if(in_array('reporting',$features_array)){ ?>
      <div class="col-12 col-md-3">
        <div class="box-white">
          <div class="dashboard-box">
            <img src="<?php echo base_url(); ?>assets/images/das_reporting.png">

  <h3>Reporting</h3>
</div>
  <p>To get all the reporting of Medical Providers, Patients , Health records, Billing in PDF's/Excels. </p>

   <a href="#" class="top-56"><button type="button" class="btn btn-primary text-center">View Report</button></a>
        </div>
      </div>
      <?php } ?>
 </div>
</div>
   </div>
   <div class="modal fade" id="appointment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-dialog" style="width: 850px;">
           <div class="modal-content">

               <?php //echo form_open_multipart('schedule/create','class="form-inner"') ?>

                  <?php //echo form_hidden('schedule_id',$schedule->schedule_id); ?>
               <div class="modal-header">
                   <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>

                   </button>
                    <h4 class="modal-title" id="myModalLabel">New Appointment </h4>

               </div>
               <div class="modal-body">
                   <div role="tabpanel">
                       <!-- Nav tabs -->
                       <ul class="nav nav-tabs" role="tablist">
                           <li role="presentation" class="active"><a href="#patient" aria-controls="patient" role="tab" data-toggle="tab">With Patient</a>

                           </li>
                           <li role="presentation"><a href="#block" aria-controls="block" role="tab" data-toggle="tab">Block Time</a>

                           </li>
                       </ul>
                       <!-- Tab panes -->
                       <div class="tab-content appointment-tab">
                           <div role="tabpanel" class="tab-pane active" id="patient">
                             <?php echo form_open_multipart('schedule/create','class="form-inner"') ?>
                             <div class="h-50">
                             <div class="row ml-10 mr-10 mt-15">
                 <div class="col-12 form-group m-0">
                               <label>PATIENT<span class="imp-red">*</span></label>
                               <input type="text"  name="patent_name" onkeyup="search()" required class="form-control text-field" id="patientPartyName" placeholder="Search patient name, DOB or SSN">
                               <input type="hidden" name="patent_id" id="patent_ids" value="">
                               <i class="fa fa-search pos-icon"></i>
                             </div>
                             <div class="popup-box" id="add"  style="display:none;">
                               <div class="row" >
                                 <!-- <div class="col-12 col-md-3">
                               <img  src="assets/images/user-img.png">
                               <p class="text-center"><b>Lorem Ipsum</b></p>
                              </div> -->
                              <div class="col-12 col-md-2 mt-15">
                               <span>3 months</span>
                             </div>
                             <div class="col-12 col-md-2 mt-15">
                               <span>Female</span>
                             </div>
                             <div class="col-12 col-md-2 mt-15 text-center">
                               <span>02/12/2019</span>
                             </div>
                             <div class="col-12 col-md-2 mt-15">
                               <span>a@gmail.com</span>
                             </div>
                             <div class="col-12 col-md-4 mt-15">
                               <span><b>M</b></span><span class="ml-10">(555) 555 - 1234</span>
                             </div>
                             <div class="col-12 col-md-3 mt-15">
                               <span><b>PRN</b></span><span class="ml-10">as123456</span>
                             </div>
                             </div>
                             </div>
                          </div>
                          <h5 class="ml-10 border-bottom color-light-blue"><b>Appointment Details</b></h5>
                          <div class="row">
                            <div class="col-12 col-md-7 form-group ml-10">
                           <label>PROVIDER<span class="imp-red">*</span></label>
                           <?php //date_default_timezone_set('Asia/Kolkata');
                           $session_id = $this->session->userdata('user_id');
                            $doctor_l = $this->db->select("*")->from("user")->where("user_role","2")->where('user.created_by',$session_id)->get()->result();  ?>
                               <select class="form-control" required name="doctor_id" id="provider" >
                                 <option value="">Select Provider</option>
                                 <?php foreach ($doctor as  $value) {
                                   ?>
                                   <option value="<?php echo $value->user_id; ?>"><?php echo $value->firstname.$value->lastname; ?></option>
                               <?php  } ?>

                                    </select>
                             </div>
                             <div class="col-12 col-md-4 form-group duration pl-0">
                               <label>DURATION<span class="imp-red">*</span></label>
                               <select class="form-control aduration" name="aduration" required id="aduration" >
                                 <!-- <option value="">Select</option> -->
                                 <option value="15 min">15 min</option>
                                 <option value="30 min">30 min</option>
                                 <option value="45 min">45 min</option>
                                 <option value="60 min">60 min</option>
                                  <option value="75 min">75 min</option>
                               </select>
                             </div>
                          </div>
                          <div class="row">
                             <div class="col-12 form-group ml-10 mr-10">
                               <label>CHIEF COMPLAINT</label>
                               <textarea class="w-100" id="chief_complaint" required  name="chief_complaint" rows="2" placeholder="Add any problems or symptoms here"> </textarea>
                             </div>
                           </div>
                           <div class="row">
                               <!-- <div class="col-12 col-md-5 ml-10">
                                   <label>APPOINTMENT TYPE<span class="imp-red">*</span></label>
                                   <select class="form-control" name="type" id="type">
                                                   <option value="">Follow-up Visit</option>
                                                   <option value="">New Patient Visit</option>
                                                   <option value="">Nursing Only</option>
                                                   <option value="">Urgent Visit</option>
                                                   <option value="">Video Visit</option>
                                                   <option value="">Wellness Exam</option>
                                    </select>
                               </div> -->
                               <div class="col-12 col-md-5 ml-10 form-group">
                                   <label>APPOINTMENT TYPE<span class="imp-red">*</span></label>
                                   <select class="form-control" required name="appointment_type" id="type" >
                                                  <option value="">select</option>
                                                   <option value="Follow-up Visit">Follow-up Visit</option>
                                                   <option value="New Patient Visit">New Patient Visit</option>
                                                   <option value="Nursing Only">Nursing Only</option>
                                                   <option value="Urgent Visit">Urgent Visit</option>
                                                   <option value="Video Visit">Video Visit</option>
                                                   <option value="Wellness Exam">Wellness Exam</option>
                                    </select>
                               </div>
                               <div class="col-12 col-md-6 form-group pl-0 when-date">
                               <label>WHEN<span class="imp-red">*</span></label>
                               <input required type="text" name="awhens"  class="form-control text-field" id="awhens" min="<?php echo date('Y-m-d'); ?>" placeholder="WHEN">
                             </div>
                           </div>
                           <div class="row">
                                <div class="col-12 col-md-4 form-group ml-10 when-date">
                               <label>From time <span class="imp-red">*</span></label>
                               <input type="text" required  name="afrom_time" onchange="getval()" class="form-control text-field" id="datetimepicker3" placeholder="from time">
                             </div>
                              <div class="col-12 col-md-4 form-group pl-0 when-date">
                               <label>To time <span class="imp-red">*</span></label>
                               <input type="text"  required name="ato_time" onchange="setval()" class="form-control text-field s" id="datetimepicker4" placeholder="To time">
                               <div id="checktime" style="display:none;"> To Time Should Not Be Less Than From Time

   </div>
                             </div>
                             <!-- <div class="col-12 col-md-3 mt-30">
                                 <div class="form-check">
   <input class="form-check-input" name="is_repeat" type="checkbox" value="" id="defaultCheck1">
   <label class="form-check-label ml-10" for="defaultCheck1">
   Repeat</label>
   </div>
                             </div> -->
                           </div>
   <input type="hidden" name="atype" value="appointment">
                 </div>
                 <div class="modal-footer">
                                <button  type="submit" class="btn btn-default">Save</button>
                                 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                             </div>
                           </form>
                               </div>



                           <div role="tabpanel" class="tab-pane" id="block">
                             <?php echo form_open_multipart('schedule/create','class="form-inner"') ?>
                             <div class="h-50">
                             <div class="row">
                               <input type="hidden" name="btype" value="block">
                               <!-- <div class="col-12 col-md-5 ml-10">
                                   <label>BLOCK TIME FOR</label>
                                   <select class="form-control" name="time" id="time">
                                                   <option value="">All Providers </option>
                                                   <option value="">Aigbodion , Godstime</option>
                                    </select>
                               </div> -->
                               <div class="col-12 col-md-5 ml-10 form-group">
                                   <label>BLOCK TIME FOR</label>
                                   <?php
   $where_in = 'schedule';
                                    $session_id = $this->session->userdata('user_id');
                                    if($this->session->userdata('isadmin')=='1'){
                                      $created_by = $this->db->select("*")->from("user")->where("user_role","2")->where('user.user_id',$session_id)->get()->row();
                                       $doctor_ls = $this->db->select("*")->from("user")->where("user_role","2")->where('user.created_by',$created_by->created_by)->where('find_in_set("'.$where_in.'", features) <> 0')->get()->result();
                                    }else{
                                    $doctor_ls = $this->db->select("*")->from("user")->where("user_role","2")->where('user.created_by',$session_id)->where('find_in_set("'.$where_in.'", features) <> 0')->get()->result();
   }
                                    ?>
                                   <select required class="form-control" name="block_time_for" id="time">
   <option value="">select</option>
                                                   <option value="all">All Providers </option>


                                                         <?php foreach ($doctor_ls as  $value) {
                                                           ?>
                                                           <option value="<?php echo $value->user_id; ?>"><?php echo $value->firstname.$value->lastname; ?></option>
                                                       <?php  } ?>
                                    </select>
                               </div>
                                <div class="col-12 col-md-6 form-group pl-0">
                               <label>WHEN</label>
                               <input required type="text" name="bwhens" class="form-control text-field" min="<?php echo date('Y-m-d'); ?>" id="bwhens" placeholder="WHEN">
                             </div>
                  </div>
                  <div class="row">
                                <div class="col-12 col-md-4 form-group ml-10 ">
                               <label>From time</label>
                               <input required type="text" name="bfrom_time" onchange="getvals()" class="form-control text-field" id="datetimepicker5" placeholder="from time">
                             </div>
                              <div class="col-12 col-md-4 form-group pl-0">
                               <label>To time</label>
                               <input required type="text" name="bto_time" onchange="setvals()" class="form-control text-field k" id="datetimepicker6" placeholder="To time">
                             </div>
                             <div class="col-12 col-md-3 form-group duration pl-0">
                               <label>DURATION<span class="imp-red">*</span></label>
                           <!-- <input list="browsers" name="bduration" id="browser">
                             <datalist id="browsers">
                              <option value="15 min">
                              <option value="30 min">
                              <option value="45 min">
                              <option value="60 min">
                               <option value="75 min">
                             </datalist> -->
                             <select class="form-control bduration" name="bduration" id="bduration" required>
                               <option value="15 min">15 min</option>
                               <option value="30 min">30 min</option>
                               <option value="45 min">45 min</option>
                               <option value="60 min">60 min</option>
                                <option value="75 min">75 min</option>
                             </select>
                             </div>
                             </div>
                             <div class="row">
                               <div class="col-12 col-md-5 ml-10 form-group">
                                   <label>REPEAT</label>
                                   <select class="form-control" name="repeat" id="repeat">
                                     <option value="">Select</option>
                                                   <option value="yes">Yes</option>
                                                   <option value="no">No</option>
                                    </select>
                               </div>

                                <div class="col-12 col-md-6 pl-0 form-group">
                                   <label>REASON<span class="imp-red">*</span></label>
                                   <select required  class="form-control" name="reason" id="reason">
                                                   <option value="">Select </option>
                                                   <option value="Lunch">Lunch </option>
                                                   <option value="Meeting">Meeting</option>
                                                   <option value="Miscellanous">Miscellanous</option>
                                                   <option value="Out of Office">Out of Office</option>
                                                   <option value="Surgery">Surgery</option>
                                                   <option value="Vacation">Vacation</option>
                                    </select>
                               </div>

                             </div>
                             <!-- <div class="row">
                               <div class="col-12 col-md-11 form-group ml-10">
                               <label>DESCRIPTION </label>
                               <input type="text" name="description" class="form-control text-field" id="dis">
                             </div>
                             </div> -->
                             <div class="row">
                             <div class="col-12 col-md-6 form-group ml-10" id="tosdate" style="display:none;">
                            <label>Date</label>
                            <input type="text"  name="repeat_date"  id="repeat_date"  class="form-control text-field"  placeholder="Date">
                          </div>
                          </div>
                             <div class="row ">
                             <div class="col-12 form-group ml-10 mr-10">
                               <label>NOTE</label>
                               <textarea required class="w-100" id="bnote" name="note" rows="2"></textarea>
                             </div>
                           </div>
                           </div>
                                <div class="modal-footer">
                  <button type="submit"  class="btn btn-default">Save</button> <!--onclick="add_appointment();" -->
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

               </div>
             </form>
                         </div>
                           </div>

                       </div>
                   </div>
            <!--    <div class="modal-footer">
                  <button type="button" onclick="add_appointment();" class="btn btn-default">Submit</button>
                   <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

               </div> -->
             <!-- </form> -->
           </div>
       </div>
   </div>


   <div class="modal fade" id="newpassword" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog" style="width: 850px;">
      <div class="modal-content">
        <?php echo form_open('dashboard/update_password','class="form-inner"') ?>
         <?php //echo form_open_multipart('schedule/create','class="form-inner"') ?>
         <?php //echo form_hidden('schedule_id',$schedule->schedule_id); ?>
         <div class="modal-header">
            <button type="button" class="close" onclick="close_changepassword();" aria-label="Close"><span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">New Password </h4>
         </div>
         <div class="modal-body">
            <div role="tabpanel">
               <!-- Nav tabs -->
               <div class="conatonar">
                  <div class="row">
                     <div class="col-md-12">

                           <div class="form-group row">
                              <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
                              <div class="col-sm-6">
                                 <input type="password" class="form-control" name="password" placeholder="Password">
                              </div>
                           </div>

                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="modal-footer">
<button type="submit"  class="btn btn-default">Save</button> <!--onclick="add_appointment();" -->
<button type="button" class="btn btn-default" onclick="close_changepassword();">Close</button>

</div>
</form>
      </div>
   </div>
</div>


<!-- <div class="row">
    <!--  table area -->
    <!--<div class="col-sm-12">
        <div  class="panel panel-default thumbnail">

            <div class="panel-heading no-print">
                <div class="btn-group">
                    <a class="btn btn-success" href="<?php //echo base_url("patient/create") ?>"> <i class="fa fa-plus"></i>  <?php //echo display('add_patient') ?> </a>
                </div>
            </div>
            <div class="panel-body">
                <table id="example" width="100%" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th><?php //echo display('serial') ?></th>
                            <th><?php //echo display('id_no') ?></th>
                            <th><?php //echo display('picture') ?></th>
                            <th><?php //echo display('first_name') ?></th>
                            <th><?php //echo display('last_name') ?></th>
                            <th><?php //echo display('email') ?></th>
                            <th><?php //echo display('phone') ?></th>
                            <th><?php //echo display('mobile') ?></th>
                            <th><?php //echo display('address') ?></th>
                            <th><?php //echo display('sex') ?></th>
                            <th><?php //echo display('blood_group') ?></th>
                            <th><?php //echo display('action') ?></th>
                            <th><?php //echo display('date_of_birth') ?></th>
                            <th><?php //echo display('create_date') ?></th>
                            <th><?php //echo display('status') ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php //if (!empty($patients)) { ?>
                            <?php //$sl = 1; ?>
                            <?php //foreach ($patients as $patient) { ?>
                                <tr class="<?php //echo ($sl & 1)?"odd gradeX":"even gradeC" ?>">
                                    <td><?php //echo $sl; ?></td>
                                    <td><?php //echo $patient->patient_id; ?></td>
                                    <td><img src="<?php //echo $patient->picture; ?>"  width="65" height="50"/></td>
                                    <td><?php //echo $patient->firstname; ?></td>
                                    <td><?php //echo $patient->lastname; ?></td>
                                    <td><?php //echo $patient->email; ?></td>
                                    <td><?php //echo $patient->phone; ?></td>
                                    <td><?php //echo $patient->mobile; ?></td>
                                    <td><?php //echo $patient->address; ?></td>
                                    <td><?php //echo $patient->sex; ?></td>
                                    <td><?php //echo $patient->blood_group; ?></td>
                                    <td class="center">
                                        <a href="<?php //echo base_url("patient/profile/$patient->id") ?>" class="btn btn-xs btn-success"><i class="fa fa-eye"></i></a>
                                        <!--<a href="<?php //echo base_url("patient/edit/$patient->id") ?>" class="btn btn-xs btn-primary"><i class="fa fa-edit"></i></a> -->

                                      <!--  <a href="<?php //echo base_url("case_manager/patient/form?pid=$patient->patient_id") ?>" class="btn btn-xs btn-warning" title="Add to Case Manager"><i class="fa fa-plus"></i></a>

                                        <a href="<?php //echo base_url("patient/delete/$patient->id") ?>" class="btn btn-xs btn-danger" onclick="return confirm('<?php //echo display('are_you_sure') ?>')"><i class="fa fa-trash"></i></a>
                                    </td>
                                    <td><?php //echo $patient->date_of_birth; ?></td>
                                    <td><?php //echo $patient->create_date; ?></td>
                                    <td>
                                      <select onchange="call('<?php //echo $patient->patient_id; ?>',this.options[this.selectedIndex].value)">
                                        <option value="1" <?php //echo (($patient->status==1)?'Selected':''); ?>>Active</option>
                                        <option value="0" <?php //echo (($patient->status==0)?'Selected':''); ?>>Inactive</option>
                                         </select>
                                      <?php //echo (($patient->status==1)?display('active'):display('inactive')); ?></td>
                                </tr>
                                <?php //$sl++; ?>
                            <?php //} ?>
                        <?php //} ?>
                    </tbody>
                </table>  <!-- /.table-responsive -->
            <!--</div>
        </div>
    </div>
</div> -->
<script>

function call(id,value)
{
 //alert(value);
  $.ajax({

       url:'<?=base_url()?>patient/changestatus',
       data:'id='+id+'&value='+value,
       success: function(msg){
        // alert(msg);
//$('#exampleModal').modal('toggle');
//alert(msg);
/**if(value='yes'){
  $("#y"+id).prop("checked", true);
}else{
  $("#n"+id).prop("checked", true);
}**/
window.location="<?=base_url()?>patient/";
     }

 });
}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script>
//     $("#patientPartyName").keyup(function(){
//         var BASE_URL = '<?php //echo base_url(); ?>';
//       //  alert(BASE_URL);
//         //alert(category_id);
//         //alert($(trim((this).val())));
//         //alert($.trim($(this).val()));
//         //exit;
//         // if(($(this).val())!=''){
//         //
//         $("#add").empty();
//         // }
//
//         $.ajax({
//             url: BASE_URL+"dashboard/search_patient",
//             data: 'p_id='+$.trim($(this).val()),
//             success: function(msg){
//                  //alert(msg);
//                 // $("#suggesstio n-box").show();
//                 //   $("#suggesstion-box").html(data);
//                 //$("#search-box").css("background","#FFF");
//                 // alert(msg);
//                 // $(".general-item-list").empty();
//                 var myObj = JSON.parse(msg);
// $("#add").empty();
// //$(".table-fixed").empty();
//                 if(myObj.length>0){
//                     //alert(myObj);
//                     //$(".table-fixed").empty();
// $("#add").empty();
//                     $.each(myObj, function(index,value) {
//                       //$(".table-fixed").empty();
//                         //$(".item").empty();
//
//                         //  alert(myObj[index].email);
//                         txt= '<tr><td style="width: 40px; overflow: hidden; font-size: 120%; margin-right: 1em;" rowspan="2"><div style="width: 39.5px; height: 39.5px; overflow: hidden; margin-right: 15px;"><img style="width: 100%; border-radius: 19.75px;" src="'+BASE_URL+myObj[index].picture+'"></div></td><td style="max-width: 100%; padding-left: 1em;"><div class="word-break" style="width: 100%;"><span data-id="3243685" class="fa fa-circle" style="display: none; font-size: 9px; padding-right:0.5em;" data-toggle="tooltip" title="Patient online"></span><span style="font-size: 15px;" class="text-primary">'+myObj[index].firstname+' '+myObj[index].lastname+'</span></div></td><td style="white-space: nowrap; text-align: right;">'+myObj[index].patient_id+'</td></tr><tr><td style="padding-left: 1em; max-width: 100%; font-size: 90%;" class="text-light" colspan="2"><div class="kpull-left">'+myObj[index].sex+' '+myObj[index].date_of_birth+'</div><div class="kpullleft"></div><div class="kpull-left"></div><div class="kpull-left"></div><div class="kpull-left">'+myObj[index].mobile+'</div><div class="kpull-left">'+myObj[index].email+' </div></td></tr>';
//                         $("#add").append(txt);
//
//                     });
//                 }else{
//                     $("#add").empty();
//
//                     // $.each(myObj, function(index,value) {
//                     //  alert(myObj[index].email);
//                     //$(".item").empty();
//                     txt= ' No data found ';
//                     $("#add").append(txt);
//
//                     // });
//                 }
//             }
//         });
//
//     });
    //$("#outhide").mouseout(function(){
    //  $("#suggesstion-box").hide();
    //});
</script>
